package org.tusiri.ws.answer;
import javax.jws.WebMethod;
import javax.jws.WebService;

import java.util.*;
import java.io.IOException;
import java.sql.*;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;

import org.apache.http.client.ClientProtocolException;
import org.json.simple.parser.ParseException;
import org.tusiri.ws.db.DBConnection;
import org.tusiri.ws.question.QuestionItem;

public class Answer {
	
	
	public void createAnswer(String access_token,String title,String content) throws ClientProtocolException, IOException, ParseException{
	
	@WebMethod
	public ArrayList<AnswerItem> getAnswerList(int id_question) {
		ArrayList<AnswerItem> questionItemList = new ArrayList<AnswerItem>();
		DBConnection dbc = new DBConnection();
		Statement stmt = dbc.getDBStmt();
		try{
			String sql = "SELECT * FROM answer WHERE id_question="+id_question;
			ResultSet rs = stmt.executeQuery(sql);
			
			// Extract data from result set
			while(rs.next()){
				//Retrieve by column name
				
				int num_answer = rs.getInt("num_answers");
				int id_user = rs.getInt("id_user");
				String content = rs.getString("content");
				String answer_date = rs.getString("date");
				int num_votes = rs.getInt("num_votes");
				
				AnswerItem q = new AnswerItem();
				questionItemList.add(q);
			}
		} catch(SQLException se){
			//Handle errors for JDBC
			se.printStackTrace();
		} catch(Exception e){
			//Handle errors for Class.forName
			e.printStackTrace();
		}
		return questionItemList;
	}
}
